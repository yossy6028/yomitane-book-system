# 子ども向け図書推薦システム

## プロジェクト概要
6-15歳の子どもを対象とした、個性に合わせた図書推薦を行うWebアプリケーション

### 主要機能
- 年齢、趣味、性格のアンケート機能
- **総合評価テスト機能**：語彙力+常識力の二軸評価（各年齢グループ語彙50問+常識50問）  
- ウェブ検索による図書推薦機能
- 推薦理由の表示機能

### 技術スタック
- フロントエンド: React.js
- バックエンド: Node.js
- AI推薦エンジン: Google Gemini 2.5 Flash API (フォールバック: ローカルアルゴリズム)
- 外部API: Google Books API, 楽天ブックスAPI
- データベース: SQLite

## 📚 図書品質管理ルール（2025-07-04制定）

### 🎯 基本方針
**「表紙画像が適切に検索・表示できない図書は推薦図書として不適切」**

### 📝 新図書追加・管理ルール
1. **表紙検索条件**: 著者が合致していれば翻訳者情報は不問
2. **新規追加条件**: Google Books API等で表紙画像が発見できることを必須条件とする  
3. **削除条件**: 表紙画像が発見できない場合は推薦図書として不適切として即座削除
4. **検証方法**: 追加時にMCP多角検索システムで事前検証実行

### 📊 品質改善実績
- **2025-07-04実行**: 272冊→265冊（7冊削除、削除率3%）
- **削除理由**: 表紙画像検索不可能、著者情報異常、検索結果0件
- **期待効果**: 表紙画像不一致問題の根本解決

## 知見管理システム
このプロジェクトでは以下のファイルで知見を体系的に管理しています：

### `.claude/context.md`
- プロジェクトの背景、目的、制約条件
- 技術スタック選定理由
- ビジネス要件や技術的制約
- 要件定義書やTodoリストを保管

### `.claude/project-knowledge.md`
- 実装パターンや設計決定の知見
- アーキテクチャの選択理由
- 避けるべきパターンやアンチパターン

### `.claude/project-improvements.md`
- 過去の試行錯誤の記録
- 失敗した実装とその原因
- 改善プロセスと結果

### `.claude/common-patterns.md`
- 頻繁に使用するコマンドパターン
- 定型的な実装テンプレート

### `.claude/debug-log.md`
- 重要なエラー解決記録
- デバッグプロセスの記録

**重要**: 新しい実装や重要な決定を行った際は、該当するファイルを更新してください。

## 開発フェーズ
現在: Phase 1 - 基盤構築中

## Claude Code運用ルール

### タスク完了後のサーバー確認自動化
Claude Codeのhooks機能により、タスク完了後に自動でサーバー状況を確認：
- プロセス確認: `ps aux | grep react-scripts`
- ポート確認: `lsof -i :3000`
- サーバー未起動時は自動でnpm start実行を促す

定型コマンド：
```bash
# サーバー状況確認
ps aux | grep -E 'react-scripts|node.*start' | grep -v grep

# ポート使用状況確認  
lsof -i :3000

# サーバー起動
npm start

# サーバー停止
pkill -f "react-scripts"
```

### 並列処理の積極活用
- 複数のファイル検索や解析は並列実行
- 複数のbashコマンドは同時実行
- 独立したタスクの並列処理を提案

### タスク完了前のテスト実行
- lint、typecheck、テストコマンドを必ず実行
- エラーがある場合は修正してから完了報告
- プロジェクトに応じた適切なテストコマンドを使用

### エラー発生時の対応
- エラー発生時は`.claude/debug-log.md`にログを残す
- 過去のログを参照し、同じ解消手段を繰り返さない
- 別の原因・アプローチを常に模索

### コード品質管理
- 定期的に冗長なスクリプトを整理
- 既存ファイルの編集を優先、新規ファイル作成は最小限
- ドキュメントファイルは明示的な要求時のみ作成